{"ast":null,"code":"var _jsxFileName = \"D:\\\\Qwipo\\\\qwipo_frontend\\\\src\\\\pages\\\\CustomerDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams, Link } from 'react-router-dom';\nimport { api, handleError } from '../services/api';\nimport AddressList from '../components/AddressList';\nimport AddressForm from '../components/AddressForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CustomerDetailPage() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [customer, setCustomer] = useState(null);\n  const [editing, setEditing] = useState(null);\n  const [adding, setAdding] = useState(false);\n  const [alert, setAlert] = useState('');\n  const load = async () => {\n    const res = await api.get(`/customers/${id}`);\n    setCustomer(res.data.data);\n  };\n  useEffect(() => {\n    load().catch(e => setAlert(handleError(e)));\n  }, [id]);\n  const del = async () => {\n    if (!window.confirm('Delete this customer permanently?')) return;\n    await api.delete(`/customers/${id}`);\n    navigate('/customers');\n  };\n  const addAddress = async payload => {\n    await api.post(`/customers/${id}/addresses`, payload);\n    setAdding(false);\n    await load();\n    setAlert('Address added');\n  };\n  const updateAddress = async payload => {\n    await api.put(`/addresses/${editing.id}`, payload);\n    setEditing(null);\n    await load();\n    setAlert('Address updated');\n  };\n  const deleteAddress = async addressId => {\n    if (!window.confirm('Delete this address?')) return;\n    await api.delete(`/addresses/${addressId}`);\n    await load();\n    setAlert('Address deleted');\n  };\n  if (!customer) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tag\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [alert && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert success\",\n      children: alert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      style: {\n        marginBottom: 10\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: 0\n            },\n            children: [customer.first_name, \" \", customer.last_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tag\",\n            children: [\"Phone: \", customer.phone_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tag\",\n            children: [\"Only One Address: \", customer.only_one_address ? 'Yes' : 'No']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tag\",\n            children: [\"Total Addresses: \", customer.address_count]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            className: \"btn ghost\",\n            to: `/customers/${id}/edit`,\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn danger\",\n            onClick: del,\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddressList, {\n      items: customer.addresses,\n      onEdit: setEditing,\n      onDelete: deleteAddress\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), !adding && !editing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn ghost\",\n        onClick: () => setAdding(true),\n        children: \"+ Add Address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), adding && /*#__PURE__*/_jsxDEV(AddressForm, {\n      initial: {},\n      onSubmit: addAddress,\n      onCancel: () => setAdding(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this), editing && /*#__PURE__*/_jsxDEV(AddressForm, {\n      initial: editing,\n      onSubmit: updateAddress,\n      onCancel: () => setEditing(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(CustomerDetailPage, \"hqX45dt48AZmUU4f8YFVQgQKNKA=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = CustomerDetailPage;\nvar _c;\n$RefreshReg$(_c, \"CustomerDetailPage\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","Link","api","handleError","AddressList","AddressForm","jsxDEV","_jsxDEV","CustomerDetailPage","_s","id","navigate","customer","setCustomer","editing","setEditing","adding","setAdding","alert","setAlert","load","res","get","data","catch","e","del","window","confirm","delete","addAddress","payload","post","updateAddress","put","deleteAddress","addressId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginBottom","display","justifyContent","alignItems","margin","first_name","last_name","phone_number","only_one_address","address_count","gap","to","onClick","items","addresses","onEdit","onDelete","marginTop","initial","onSubmit","onCancel","_c","$RefreshReg$"],"sources":["D:/Qwipo/qwipo_frontend/src/pages/CustomerDetailPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams, Link } from 'react-router-dom';\nimport { api, handleError } from '../services/api';\nimport AddressList from '../components/AddressList';\nimport AddressForm from '../components/AddressForm';\n\nexport default function CustomerDetailPage(){\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [customer, setCustomer] = useState(null);\n  const [editing, setEditing] = useState(null);\n  const [adding, setAdding] = useState(false);\n  const [alert, setAlert] = useState('');\n\n  const load = async () => {\n    const res = await api.get(`/customers/${id}`);\n    setCustomer(res.data.data);\n  };\n\n  useEffect(()=>{ load().catch(e=>setAlert(handleError(e))); }, [id]);\n\n  const del = async () => {\n    if (!window.confirm('Delete this customer permanently?')) return;\n    await api.delete(`/customers/${id}`);\n    navigate('/customers');\n  };\n\n  const addAddress = async (payload) => {\n    await api.post(`/customers/${id}/addresses`, payload);\n    setAdding(false); await load(); setAlert('Address added');\n  };\n\n  const updateAddress = async (payload) => {\n    await api.put(`/addresses/${editing.id}`, payload);\n    setEditing(null); await load(); setAlert('Address updated');\n  };\n\n  const deleteAddress = async (addressId) => {\n    if (!window.confirm('Delete this address?')) return;\n    await api.delete(`/addresses/${addressId}`);\n    await load(); setAlert('Address deleted');\n  };\n\n  if (!customer) return <div className=\"tag\">Loading...</div>;\n\n  return (\n    <div>\n      {alert && <div className=\"alert success\">{alert}</div>}\n      <div className=\"card\" style={{marginBottom:10}}>\n        <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\n          <div>\n            <h2 style={{margin:0}}>{customer.first_name} {customer.last_name}</h2>\n            <div className=\"tag\">Phone: {customer.phone_number}</div>\n            <div className=\"tag\">Only One Address: {customer.only_one_address ? 'Yes' : 'No'}</div>\n            <div className=\"tag\">Total Addresses: {customer.address_count}</div>\n          </div>\n          <div style={{display:'flex', gap:8}}>\n            <Link className=\"btn ghost\" to={`/customers/${id}/edit`}>Edit</Link>\n            <button className=\"btn danger\" onClick={del}>Delete</button>\n          </div>\n        </div>\n      </div>\n\n      <AddressList items={customer.addresses} onEdit={setEditing} onDelete={deleteAddress} />\n\n      {!adding && !editing && (\n        <div style={{marginTop:10}}>\n          <button className=\"btn ghost\" onClick={()=>setAdding(true)}>+ Add Address</button>\n        </div>\n      )}\n\n      {adding && (\n        <AddressForm initial={{}} onSubmit={addAddress} onCancel={()=>setAdding(false)} />\n      )}\n\n      {editing && (\n        <AddressForm initial={editing} onSubmit={updateAddress} onCancel={()=>setEditing(null)} />\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}