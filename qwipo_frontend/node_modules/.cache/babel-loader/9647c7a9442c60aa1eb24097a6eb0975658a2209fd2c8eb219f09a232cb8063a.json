{"ast":null,"code":"var _jsxFileName = \"D:\\\\Qwipo\\\\qwipo_frontend\\\\src\\\\pages\\\\CustomerListPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { api, handleError } from '../services/api';\nimport Filters from '../components/Filters';\nimport CustomerTable from '../components/CustomerTable';\nimport Pagination from '../components/Pagination';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CustomerListPage() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [meta, setMeta] = useState({\n    total: 0,\n    page: 1,\n    limit: 10\n  });\n  const [query, setQuery] = useState({\n    page: 1,\n    limit: 10,\n    sortBy: 'created_at',\n    order: 'DESC'\n  });\n  const [alert, setAlert] = useState('');\n  const fetchData = async () => {\n    const params = new URLSearchParams(query).toString();\n    const res = await api.get(`/customers?${params}`);\n    setItems(res.data.data);\n    setMeta(res.data.meta);\n  };\n  useEffect(() => {\n    fetchData().catch(e => setAlert(handleError(e)));\n  }, [JSON.stringify(query)]);\n  const onDelete = async id => {\n    if (!window.confirm('Delete this customer permanently?')) return;\n    try {\n      await api.delete(`/customers/${id}`);\n      setAlert('Customer deleted');\n      fetchData();\n    } catch (e) {\n      setAlert(handleError(e));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [alert && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert success\",\n      children: alert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Filters, {\n      onChange: setQuery,\n      initial: query\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomerTable, {\n      items: items,\n      onDelete: onDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      page: meta.page,\n      limit: meta.limit,\n      total: meta.total,\n      onChange: p => setQuery(q => ({\n        ...q,\n        page: p\n      }))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/customers/new\",\n        className: \"btn primary\",\n        children: \"+ New Customer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 35\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_s(CustomerListPage, \"nyCDrh08wv5QIrdFS7v4FnZUYj0=\");\n_c = CustomerListPage;\nvar _c;\n$RefreshReg$(_c, \"CustomerListPage\");","map":{"version":3,"names":["React","useEffect","useState","Link","api","handleError","Filters","CustomerTable","Pagination","jsxDEV","_jsxDEV","CustomerListPage","_s","items","setItems","meta","setMeta","total","page","limit","query","setQuery","sortBy","order","alert","setAlert","fetchData","params","URLSearchParams","toString","res","get","data","catch","e","JSON","stringify","onDelete","id","window","confirm","delete","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onChange","initial","p","q","style","marginTop","to","_c","$RefreshReg$"],"sources":["D:/Qwipo/qwipo_frontend/src/pages/CustomerListPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { api, handleError } from '../services/api';\nimport Filters from '../components/Filters';\nimport CustomerTable from '../components/CustomerTable';\nimport Pagination from '../components/Pagination';\n\nexport default function CustomerListPage(){\n  const [items, setItems] = useState([]);\n  const [meta, setMeta] = useState({ total:0, page:1, limit:10 });\n  const [query, setQuery] = useState({ page:1, limit:10, sortBy:'created_at', order:'DESC' });\n  const [alert, setAlert] = useState('');\n\n  const fetchData = async () => {\n    const params = new URLSearchParams(query).toString();\n    const res = await api.get(`/customers?${params}`);\n    setItems(res.data.data);\n    setMeta(res.data.meta);\n  };\n\n  useEffect(()=>{ fetchData().catch(e=>setAlert(handleError(e))); }, [JSON.stringify(query)]);\n\n  const onDelete = async (id) => {\n    if (!window.confirm('Delete this customer permanently?')) return;\n    try {\n      await api.delete(`/customers/${id}`);\n      setAlert('Customer deleted');\n      fetchData();\n    } catch (e) { setAlert(handleError(e)); }\n  };\n\n  return (\n    <div>\n      {alert && <div className=\"alert success\">{alert}</div>}\n      <Filters onChange={setQuery} initial={query} />\n      <CustomerTable items={items} onDelete={onDelete} />\n      <Pagination page={meta.page} limit={meta.limit} total={meta.total} onChange={(p)=>setQuery(q=>({...q, page:p}))} />\n      <div style={{marginTop:10}}><Link to=\"/customers/new\" className=\"btn primary\">+ New Customer</Link></div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}